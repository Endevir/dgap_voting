{% extends "polls/base.html" %}

{% block content %}

{% if latest_poll_list %}
	<div class="row"> 
	{% for poll in latest_poll_list %}
		<div class="col-lg-6">
			<div class="panel panel-{% if not poll.is_closed %}primary{% else %}info{% endif %}">
				<div class="panel-heading clearfix">
					<h1 class="panel-title pull-left">{{ poll.name }} </h1> 
					<h1 class="panel-title pull-right">{% if not poll.is_closed %}Opened{% else %}Closed{% endif %}</h1> 
				</div>
				<div class="panel-body">
					<div class="col-lg-9">
						{% if not poll.is_closed %}
						<div class="panel panel-default">
							<div class="panel-heading">
								<h1 class="panel-title">{{ poll.question }}</h1> 
							</div>
							<ul class="list-group">
							<form action="{% url 'polls:vote' poll.id %}" method="post">
								{% csrf_token %}
								{% if poll.answer_type == 'OWN' %}
										<div class="form-group" style="margin-bottom:0px">
											<textarea class="form-control" rows="5" name="choice"></textarea>
										</div>
								{% endif %}
								{% for choice in poll.choice_set.all %}
									{% if poll.answer_type == 'MANY' %}
										<li class="list-group-item" style="padding-top:0px; padding-bottom:0px;">
											<div class="checkbox">
												<label>
													<input type="checkbox" name="choice" id="choice{{ forloop.counter }}" value="{{ choice.id }}">
													{{ choice.choice_text }}
												</label>
											</div>
										</li>
									{% endif %}
									{% if poll.answer_type == 'ONE' %}
										<li class="list-group-item" style="padding-top:0px; padding-bottom:0px;">
											<div class="radio">
												<label>
													<input type="radio" name="choice" id="choice{{ forloop.counter }}" value="{{ choice.id }}">
													{{ choice.choice_text }}
												</label>
											</div>
										</li>
									{% endif %}
								{% endfor %}
							</ul>
							<div class="panel-footer clearfix">
								<button type="submit" value="vote" class="btn btn-default">Vote</button>
							</form>
							</div>
						</div>
					{% else %}
						<div class="panel panel-default">
							<div class="panel-heading">
								<h1 class="panel-title">{{ poll.question }}</h1> 
							</div>
							<ul class="list-group">
								{% for choice in poll.choice_set.all %}
									<li class="list-group-item" style="padding-top:0px; padding-bottom:0px;">
										<div class="radio">
											<div class="pull-left">
												{{ choice.choice_text }}
											</div>
											<div class="pull-right">
												{{ choice.votes }}
											</div>
										</div>
									</li>
								{% endfor %}
							</ul>
							<div class="panel-footer clearfix">
								<a href="{% url 'polls:results' poll.id %}" class="btn btn-default">Results</a>
							</div>
						</div>
	
					{% endif %}
					</div>
				<div class="col-lg-3">
						<div class="panel panel-default">
							<div class="panel-heading">
								<h1 class="panel-title">Type</h1> 
							</div>
							<div class="panel-body">
								{% if poll.public %}
									Public
								{% else %}
									Anonymous
								{% endif %}
							</div>
						</div>
						<div class="panel panel-default">
							<div class="panel-heading">
								<h1 class="panel-title">Ending</h1> 
							</div>
							<div class="panel-body">
								{{ poll.end_date |date:"d M" }}
								{{ poll.end_date |time:"H:i" }}	
							</div>
						</div>
					</div>

				</div>

			</div>
		</div>
		{% if forloop.counter|divisibleby:2 %}
		<div class="clearfix visible-lg-block"></div>
		{% endif %}
   	{% endfor %}
	</div>
{% else %}
	<p>No polls are available.</p>
{% endif %}


{% endblock content %}

